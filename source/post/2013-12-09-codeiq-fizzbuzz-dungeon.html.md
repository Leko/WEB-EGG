---
path: /post/codeiq-fizzbuzz-dungeon/
title: CodeIQのFizzBuzzダンジョンLV1~4を解いた
date: 2013-12-09T15:25:42+00:00
twitter_id:
  - "409934056722149376"
categories:
  - やってみた
tags:
  - fizzbuzz
  - JavaScript
---

こんにちは。  
[CodeIQ](https://codeiq.jp/)というプログラミングの問題を解くサービスで面白そうな問題を見つけました。

> <span class="removed_link" title="https://codeiq.jp/ace/yanai_masakazu_fizzbuzz/">挑戦者求む！クロノス・クラウン合同会社 柳井 政和@FizzBuzz ダンジョンさん｜ CodeIQ</span>

よくある FizzBuzz モノなのですが、段階的に縛りが強くなっていくという問題です。  
この問題を 4 問解いてみました。

<!--more-->

## LV1

| 字数制限 | 禁止文字 |
| -------- | -------- |
| 100      | なし     |

禁止文字もなく字数制限も甘いので愚直な三項演算。  
見た目がちょっと綺麗になるよう整えました

下で 38 文字、スペースを削除すれば 20 文字です。

```javascript
i % 15 ? (i % 5 ? (i % 3 ? 0 : 1) : 2) : 3;
```

## LV2

| 字数制限 | 禁止文字                                                                                               |
| -------- | ------------------------------------------------------------------------------------------------------ |
| 30       | `?`, `:`, `&`, `|`, `,` ,`$` ,`eval` ,`function`, `Function`, `if`, `switch`, `for`, `while`, `return` |

if や三項演算での分岐が使えなくなってしまいました。  
3 の倍数のときに 1 になって、5 の倍数のとき 2 になって、15 の倍数のとき 3 になるには。

- `!(i % 3)`
  - 3 の倍数なら 1、違うなら 0
- `!(i % 5) * 2`
  - 5 の倍数なら 2、違うなら 0

15 の倍数は 3,5 の倍数であれば良いので、上を足します。

```javascript
!(i % 5) * 2 + !(i % 3);
```

- 15 の倍数(3 と 5 の倍数)なら`3`
- 5 の倍数なら`2`
- 3 の倍数なら`1`
- いずれでもなければ``

とうまくいきます。

## LV3

| 字数制限 | 禁止文字                                                                                                                                     |
| -------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| 40       | `?`, `:`, `&`, `|`, `,`, `$`, `eval`, `function`, `Function`, `if`, `switch`, `for`, `while`, `return`, `!`, `^`, `~`, `<`, `>`, `=`, `Math` |

今度は`!`が封じられました。  
が、1,0 を反転するだけなら 1 引いて-1 かければ良いのでそんなに難しくもないです

- `(Boolean(i % 5) - 1) * -2`
  - 5 の倍数なら 2、違うなら 0
- `(Boolean(i % 3) - 1) * -1`
  - 3 の倍数なら 1、違うなら 0

とさっきの形に落とし込むことができました。あとは足すだけです。

スペースを消して、39 文字。ギリギリです。

```javascript
(Boolean(i % 5) - 1) * -2 + (Boolean(i % 3) - 1) * -1;
```

## LV4

| 字数制限 | 禁止文字                                                                                                                                          |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| 70       | `?`, `:`, `&`, `|`, `,`, `$`, `eval`, `function`, `Function`, `if`, `switch`, `for`, `while`, `return`, `!`, `^`, `~`, `<`, `>`, `=`, `Math`, `%` |

さらに`%`が封じられました。ただ制限文字数が増えてます。

％は、切り捨てでごり押します。  
~~での切り捨ても禁止文字なので parseInt を使います。

`(1%5)`としていた部分を、`(i-parseInt(i/5)*5)`と置き換えます。 これで 5 で割った余りが取れるので、後は LV3 と同じです。

`i%3`についても同様なので省略します。

スペースを消して、67 文字に収まりました。

```javascript
(Boolean(i - parseInt(i / 5) * 5) - 1) * -2 +
  (Boolean(i - parseInt(i / 3) * 3) - 1) * -1;
```

もっとスマートに解ける方法がありましたら教えていただけると幸いです。
