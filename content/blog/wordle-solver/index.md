---
title: Wordleというクイズゲームのsolverを実装する
date: '2022-01-11T11:24:43.105Z'
featuredImage: ./2022-01-10-21-48-28.png
tags:
  - JavaScript
  - TypeScript
---

突然ですがこういうツイートを見たことないでしょうか。どの界隈で流行ってるのかわかりませんが[Wordle](https://www.powerlanguage.co.uk/wordle/)というゲームが密かに人気を集めています。

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Wordle 205 4/6<br><br>🟨⬛⬛🟨⬛<br>⬛⬛⬛⬛⬛<br>⬛🟩⬛⬛🟩<br>🟩🟩🟩🟩🟩</p>&mdash; Leko / れこ (@L_e_k_o) <a href="https://twitter.com/L_e_k_o/status/1480210232433278981?ref_src=twsrc%5Etfw">January 9, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

ルールは非常にシンプルで、フィードバックを頼りに５文字の英単語を予測するゲームです。

- １ゲームにつき６回まで試行可能、一度確定した入力はやり直せない
- 単語を確定すると、文字の種類と位置についてのフィードバックが得られる
  - 灰: その文字は正解の単語に含まれない
  - 黄: その文字は正解の単語に含まれているが位置が違う
  - 緑: その文字がその位置に含まれる
- ゲームの辞書に登録されてない文字列（ex. ランダムな英数など）は入力不可

下記の画像は実際にあった問題の私の回答で、この例とゲームの仕様を照らし合わせると以下のような流れになります。

![](./2022-01-10-21-48-28.png)

1. `RALES`: `R`と`E`が含まれているが`A`, `L`, `S`は含まれていない
2. `POINT`: `P`, `O`, `I`, `N`, `T`は含まれていない
3. `DUMKY`: 正解の単語は`*U**Y`である
4. `QUERY`: 正解

このように得られたフィードバックから単語の文字と位置を絞り正解に辿り着くゲームです。最初は友人と人力で解いて遊んでいましたが、ゲームの理解が進むにつれて徐々に「母音/子音を絞り込む強単語」「フィードバックによる２手目以降の対応」などの戦略が練られてきたため、カッとなって自動で解くアルゴリズムを考えて実装してみました。

## 成果物

実際に作ったものはこちらのリポジトリにコミットしています。ぜひ試してみてください。  
README にも書いてありますが私が使ってる辞書は権利的にリポジトリにコミットできないため辞書は各自で用意してください。

> &mdash; [Leko/wordle-solver: An unofficial solver for the Wordle](https://github.com/Leko/wordle-solver)

## アルゴリズムのスコープ

このような使い方ができるプログラムが当記事におけるアルゴリズムのスコープとします。

1. repl を起動
2. １手目の単語の予測を標準出力に出力
3. その単語を Wordle のゲーム画面に転記
4. 得られたフィードバックを repl に転記
5. 2 に戻り正解するか最長 6 ターン繰り返し

Wordle はブラウザゲーなので Chrome 拡張などを作れば完全自動操作もできるのですが、そこはアルゴリズムの本筋ではないのでスコープから除外します。なので Node コマンドで JS を起動し、repl で対話しながら手動でブラウザを操作するようにしました。もし完全自動化をやった際には別の記事を書きます。

## 基本戦略

## 辞書の構築

## 評価値の計算

## 実戦投入した結果
